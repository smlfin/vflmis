<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Performance Report</title>
    <link rel="stylesheet" href="staff_report_style.css"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="report-header">
        <h1>Staff Performance Report</h1>
        <div class="header-nav">
            <a href="dashboard.html">Go Back to Dashboard</a>
            <a href="index.html">Logout</a>
        </div>
    </div>
    
    <div class="report-container">
        
        <div id="loading-message" style="text-align: center; padding: 20px; font-size: 1.2em; color: var(--teal-primary);">
            Loading report data. Please wait...
        </div>

        <div class="report-controls" id="report-controls" style="display: none;">
            <div class="filter-group">
                <label for="month-select">Select Month:</label>
                <select id="month-select"></select>
            </div>
            <div class="filter-group">
                <label for="staff-search-input">Select Staff Name:</label>
                <input list="staff-names-list" id="staff-search-input" placeholder="Search or Select Staff"> 
                <datalist id="staff-names-list"></datalist>
            </div>
            <div class="filter-group" style="align-self: flex-end;">
                <button id="generate-report-btn">Generate Report</button> 
            </div>
            <div class="filter-group">
                <label for="branch-select">Select Branch:</label>
                <select id="branch-select"></select>
            </div>
            <div class="filter-group">
                <label for="product-select">Select Product:</label>
                <select id="product-select"></select>
            </div>
            <div class="filter-group date-filter">
                <label for="start-date">Start Date:</label>
                <input type="date" id="start-date">
            </div>
            <div class="filter-group date-filter">
                <label for="end-date">End Date:</label>
                <input type="date" id="end-date">
            </div>
            <div class="filter-group" style="align-self: flex-end;">
                <button id="show-ranking-btn">Show Ranking</button>
            </div>
        </div>
        
        <div id="main-report-sections" class="report-content" style="display: none;">
            
            <div class="report-section" id="staff-summary-section">
                <h2>Staff Summary (Inflow, Outflow, Net Growth, Outstanding) - Filter by Staff Name Above</h2>
                <div class="table-responsive">
                    <table id="staff-summary-table" class="data-table">
                        <thead>
                            <tr>
                                <th>Staff Name</th>
                                <th>Branch</th>
                                <th>Total Inflow</th>
                                <th>Total Outflow</th>
                                <th>Net Growth</th>
                                <th>Outstanding</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </div>

            <div class="report-section" id="company-summary-section">
                <h2>Company-wise Breakdown</h2>
                <div class="table-responsive">
                    <table id="company-summary-table" class="data-table">
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Total Inflow</th>
                                <th>Total Outflow</th>
                                <th>Net Growth</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="report-section" id="product-summary-section">
                <h2>Product-wise Breakdown</h2>
                <div class="table-responsive">
                    <table id="product-summary-table" class="data-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Total Inflow</th>
                                <th>Total Outflow</th>
                                <th>Net Growth</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="report-section" id="monthly-breakdown-section">
                <h2>Monthly Break Down</h2>
                <div class="table-responsive">
                    <table id="monthly-breakdown-table" class="data-table">
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>Inflow</th>
                                <th>Outflow</th>
                                <th>Net Growth</th>
                                <th>Action</th> 
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="report-section" id="historical-trends-section">
                <h2>Historical Performance Trends (Filtered View)</h2>
                <canvas id="performance-chart"></canvas>
            </div>

            <div class="report-section" id="cumulative-trends-section">
                <h2>Company-wide Cumulative Performance Trends</h2>
                <canvas id="cumulative-performance-chart"></canvas>
            </div>
        </div>
        
        <div id="no-data-message" class="report-section hidden" style="text-align: center; padding: 20px; color: var(--negative-color); font-weight: bold;">
            No data found for the selected filters.
        </div>
    </div>

    <div id="detailed-entries-container" class="report-section hidden">
        <button id="back-to-report-btn">‚Üê Back to Report</button>
        <h2>Detailed Entries for <span id="detailed-title"></span></h2>
        <div class="controls">
            <label>
                <input type="checkbox" id="show-customer-name"> Show Customer Names
            </label>
        </div>
        <table id="detailed-table" class="data-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>INF Total</th>
                    <th>OUT Total</th>
                    <th>Net</th>
                    <th class="customer-name-column hidden">Customer Name</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <script src="staff_report.js"></script>
</body>
</html>